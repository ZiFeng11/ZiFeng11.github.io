webpackJsonp([57],{1045:function(e,t){},1301:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkParentPhoneCode=t.sendCheckCodeToParentPhone=t.checkLoginName=t.updateAvatar=t.getAvatar=t.changeSchoolOrg=t.getSchoolOrg=t.getOrgInfo=t.sendPassword=t.changeOrg=t.changeIdentity=t.getIdentityInfo=t.queryCurrent=t.query=void 0;var a=n(136),u=r(a),o=n(353),c=r(o),i=(t.query=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/users"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.queryCurrent=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/current_user"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getIdentityInfo=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/current/user/identity"));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.changeIdentity=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/current/user/identity",{method:"POST",body:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.changeOrg=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/update/userCurrentSchool?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.sendPassword=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/user/updatePassword",{method:"POST",body:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getOrgInfo=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/get/user/school"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getSchoolOrg=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/get/user/orgSchool"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.changeSchoolOrg=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/update/updateUserOrgCurrentSchool?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getAvatar=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/selectAvatar"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.updateAvatar=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/updateAvatar?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.checkLoginName=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/cas/checkLoginName?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.sendCheckCodeToParentPhone=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/sendCheckCodeToParentPhone?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.checkParentPhoneCode=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/checkParentPhoneCode?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n(354)),s=n(350),f=r(s)},899:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),u=r(a),o=n(998),c=r(o),i=n(136),s=r(i);n(999);var f=n(1301),l=n(335);t.default={namespace:"user",state:{list:[],loading:!1,currentUser:{},checkLoginNameMsg:null,checkLoginNameContent:{}},effects:{fetch:s.default.mark(function e(t,n){var r,a=n.call,u=n.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"changeLoading",payload:!0});case 2:return e.next=4,a(f.query);case 4:if(r=e.sent,e.t0=!r.ifLogin,!e.t0){e.next=9;break}return e.next=9,u(l.routerRedux.push("/user/login"));case 9:if(e.t1=!r.status,!e.t1){e.next=13;break}return e.next=13,u(l.routerRedux.push("/user/login"));case 13:return e.next=15,u({type:"save",payload:r.content});case 15:return e.next=17,u({type:"changeLoading",payload:!1});case 17:case"end":return e.stop()}},e,this)}),fetchCurrent:s.default.mark(function e(t,n){var r,a=n.call,u=n.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(f.queryCurrent);case 2:if(r=e.sent,e.t0=!r.ifLogin,!e.t0){e.next=7;break}return e.next=7,u(l.routerRedux.push("/user/login"));case 7:if(e.t1=!r.status,!e.t1){e.next=11;break}return e.next=11,u(l.routerRedux.push("/user/login"));case 11:return e.next=13,u({type:"saveCurrentUser",payload:r});case 13:case"end":return e.stop()}},e,this)}),checkLoginName:s.default.mark(function e(t,n){var r,a,u,o=t.payload,i=t.onSuccess,l=t.onError,d=n.call,p=n.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(f.checkLoginName,o);case 2:return r=e.sent,e.next=5,p({type:"Save",payload:{checkLoginNameContent:r}});case 5:if(!r||!r.content){e.next=25;break}if(null==schoolDO){e.next=13;break}return e.next=9,p({type:"Save",payload:{checkLoginNameMsg:null}});case 9:a=r.content.userId,i&&i(a),e.next=23;break;case 13:if(!r.content.ifCheck){e.next=20;break}return e.next=16,p({type:"Save",payload:{checkLoginNameMsg:null}});case 16:u=r.content.userId,i&&i(u),e.next=23;break;case 20:return e.next=22,p({type:"Save",payload:{checkLoginNameMsg:r&&r.message}});case 22:l&&l();case 23:e.next=26;break;case 25:c.default.error(r?r.message:"response is not returned!");case 26:case"end":return e.stop()}},e,this)})},reducers:{save:function(e,t){return(0,u.default)({},e,{list:t.payload})},changeLoading:function(e,t){return(0,u.default)({},e,{loading:t.payload})},saveCurrentUser:function(e,t){return(0,u.default)({},e,{currentUser:t.payload})},changeNotifyCount:function(e,t){return(0,u.default)({},e,{currentUser:(0,u.default)({},e.currentUser,{notifyCount:t.payload})})},Save:function(e,t){var n=t.payload;return(0,u.default)({},e,n)}}},e.exports=t.default},998:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e){if(i)return void e(i);d.a.newInstance({prefixCls:g,transitionName:v,style:{top:c},getContainer:s,maxCount:f},function(t){if(i)return void e(i);i=t,e(t)})}function u(e){var t=void 0!==e.duration?e.duration:h,n={info:"info-circle",success:"check-circle",error:"close-circle",warning:"exclamation-circle",loading:"loading"}[e.type],r=e.key||y++,u=new Promise(function(u){var o=function(){return"function"==typeof e.onClose&&e.onClose(),u(!0)};a(function(a){var u=l.createElement(p.default,{type:n,theme:"loading"===n?"outlined":"filled"}),c=n?u:"";a.notice({key:r,duration:t,style:{},content:l.createElement("div",{className:"".concat(g,"-custom-content").concat(e.type?" ".concat(g,"-").concat(e.type):"")},e.icon?e.icon:c,l.createElement("span",null,e.content)),onClose:o})})}),o=function(){i&&i.removeNotice(r)};return o.then=function(e,t){return u.then(e,t)},o.promise=u,o}function o(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}Object.defineProperty(t,"__esModule",{value:!0});var c,i,s,f,l=n(1),d=(n.n(l),n(348)),p=n(202),h=3,y=1,g="ant-message",v="move-up",x={open:u,config:function(e){void 0!==e.top&&(c=e.top,i=null),void 0!==e.duration&&(h=e.duration),void 0!==e.prefixCls&&(g=e.prefixCls),void 0!==e.getContainer&&(s=e.getContainer),void 0!==e.transitionName&&(v=e.transitionName,i=null),void 0!==e.maxCount&&(f=e.maxCount,i=null)},destroy:function(){i&&(i.destroy(),i=null)}};["success","info","warning","error","loading"].forEach(function(e){x[e]=function(t,n,a){return o(t)?x.open(r(r({},t),{type:e})):("function"==typeof n&&(a=n,n=void 0),x.open({content:t,duration:n,type:e,onClose:a}))}}),x.warn=x.warning,t.default=x},999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(201),a=(n.n(r),n(1045));n.n(a)}});